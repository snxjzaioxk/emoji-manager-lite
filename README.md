# Emoji Manager Lite v2.4.0

一款专为电脑用户设计的本地表情包管理工具，支持表情包的统一存储、分类和管理功能。

## 功能特性

### 🚀 核心功能
- **批量导入**：支持从本地文件夹批量导入表情包，支持 JPG、PNG、GIF、WebP 等格式
- **拖拽导入**：支持拖拽单个或多个文件/文件夹直接导入
- **智能分类**：自定义分类和标签系统，支持多级文件夹结构
- **快速搜索**：关键字搜索，支持按格式、尺寸、时间筛选
- **收藏管理**：常用表情包收藏功能
- **重复检测**：自动识别并提示重复表情包
- **全屏预览**：全新图像预览组件，支持大图查看和详细操作 (v2.3.0新增)

### 🛠️ 实用工具
- **一键复制**：快速复制表情包到剪贴板
- **格式转换**：支持常见格式间的相互转换
- **批量操作**：批量重命名、批量删除
- **使用统计**：记录最常使用的表情包
- **导出功能**：支持将表情包导出到指定文件夹
- **智能错误处理**：用户友好的错误提示和处理机制 (v2.3.0新增)

### 🎨 界面设计
- **现代化界面**：简洁美观的用户界面
- **主题切换**：支持深色/浅色主题
- **视图模式**：网格视图和列表视图切换
- **响应式设计**：适配不同屏幕尺寸
- **触控友好**：专门优化触控设备使用体验 (v2.3.0新增)
- **无障碍支持**：高对比度模式和减动效模式支持 (v2.3.0新增)

### 🔧 技术特性
- **TypeScript支持**：完整的类型定义，提升开发体验 (v2.3.0新增)
- **性能优化**：懒加载和防抖处理，提升应用响应速度 (v2.3.0新增)
- **错误恢复**：智能错误识别和恢复机制 (v2.3.0新增)
- **快捷键支持**：ESC关闭、Ctrl+C复制、F切换收藏 (v2.3.0新增)

## 技术架构

- **前端框架**：React + TypeScript
- **桌面框架**：Electron
- **数据库**：SQLite
- **图像处理**：Sharp
- **构建工具**：Vite
- **UI 组件**：Lucide React Icons

## 开发环境

### 系统要求
- Node.js 18+
- npm 或 yarn
- Windows 10+ / macOS 10.14+ / Linux

### 安装依赖

```bash
npm install
```

### 开发模式

```bash
npm run dev
```

这将同时启动主进程和渲染进程的开发服务器。

### 构建应用

```bash
npm run build
```

### 打包应用

```bash
npm run package
```

## 项目结构

```
emoji-manager-lite/
├── src/
│   ├── main/           # Electron 主进程
│   │   ├── main.ts     # 主进程入口
│   │   ├── database.ts # 数据库管理
│   │   ├── fileManager.ts # 文件管理
│   │   └── preload.ts  # 预加载脚本
│   ├── renderer/       # 渲染进程 (React)
│   │   ├── src/
│   │   │   ├── components/ # React 组件
│   │   │   │   ├── EmojiCard.tsx      # 表情包卡片组件
│   │   │   │   ├── EmojiGrid.tsx      # 网格视图组件
│   │   │   │   ├── EmojiListItem.tsx  # 列表项组件
│   │   │   │   └── ImagePreview.tsx   # 图像预览组件 (新增)
│   │   │   ├── styles/        # 样式文件 (新增)
│   │   │   │   └── touch-accessibility.css # 触控友好样式 (新增)
│   │   │   ├── types/         # TypeScript 类型定义 (新增)
│   │   │   │   └── global.d.ts    # 全局类型声明 (新增)
│   │   │   ├── App.tsx        # 主应用组件
│   │   │   └── main.tsx       # 渲染进程入口
│   │   └── index.html
│   └── shared/         # 共享模块 (重构)
│       ├── types.ts     # 共享类型定义
│       ├── errorHandling.ts # 错误处理工具 (新增)
│       └── utils.ts     # 工具函数库 (新增)
├── public/             # 静态资源
├── assets/             # 应用图标等
├── dist/               # 构建输出
└── release/            # 打包输出
```

### 新增文件说明

**v2.3.0 新增的核心文件：**

- **`src/renderer/src/components/ImagePreview.tsx`** - 全新图像预览组件
- **`src/renderer/src/styles/touch-accessibility.css`** - 触控设备友好样式
- **`src/renderer/src/types/global.d.ts`** - TypeScript全局类型定义
- **`src/shared/errorHandling.ts`** - 集中式错误处理系统
- **`src/shared/utils.ts`** - 实用工具函数库

## 使用说明

### 导入表情包
1. 点击左侧边栏的"导入表情包"按钮
2. 选择文件夹或拖拽文件到导入区域
3. 选择目标分类和导入选项
4. 点击"开始导入"

### 管理表情包
- **搜索**：在顶部搜索框输入关键词
- **筛选**：点击筛选按钮设置详细筛选条件
- **收藏**：点击表情包上的心形图标
- **复制**：双击表情包或点击复制按钮
- **删除**：右键菜单或选择后批量删除

### 设置配置
1. 点击左侧边栏的"设置"按钮
2. 配置默认路径、主题、视图模式等
3. 点击"保存设置"

## 数据存储

- **数据库文件**：`%APPDATA%/emoji-manager-lite/emoji-manager.db`
- **表情包存储**：`%APPDATA%/emoji-manager-lite/emojis/`
- **配置文件**：存储在 SQLite 数据库中

## 开发指南

### 添加新功能
1. 在 `src/shared/types.ts` 中定义相关类型
2. 在主进程中实现业务逻辑
3. 在 `preload.ts` 中暴露 API
4. 在渲染进程中创建 UI 组件

### 数据库操作
所有数据库操作都在 `src/main/database.ts` 中实现，包括：
- 表情包 CRUD 操作
- 分类管理
- 设置存储

### 文件管理
文件相关操作在 `src/main/fileManager.ts` 中实现，包括：
- 文件导入/导出
- 图像处理
- 格式转换

## 许可证

MIT License

## 贡献

欢迎提交 Issue 和 Pull Request！

## 更新日志

### v2.3.0 - 全新功能升级
**发布时间：2025年1月**

#### 🎉 全新功能

**1. 图像预览组件 (ImagePreview)**
- 全屏预览模式，支持大图查看，背景暗化突出显示
- 智能缩放功能，根据屏幕尺寸自动调整图像大小
- 详细文件信息显示（文件名、格式、大小、尺寸等）
- 快捷键支持：ESC关闭、Ctrl+C复制、F切换收藏
- 优雅的加载状态和错误处理
- 一键操作：复制、收藏、下载、打开位置、删除

**2. 触控友好样式系统**
- 44px最小点击区域，符合无障碍设计标准
- 专门的触控设备适配，优化平板和手机使用体验
- 高对比度模式支持，为视力障碍用户提供更好体验
- 减动效模式支持，减少动画效果
- 响应式字体，在小屏幕设备上自动增大字体

**3. TypeScript类型系统**
- 全局类型声明文件，提供智能提示
- 完整的类型定义，减少运行时错误
- 提升代码质量和开发效率
- 更好的IDE支持和自动补全

#### 🛠️ 系统优化

**1. 集中式错误处理**
- 智能错误识别（网络、文件系统、权限等）
- 用户友好的中文错误提示
- 精确的错误代码映射，便于问题排查
- 安全错误包装器，确保应用稳定运行

**2. 实用工具函数库**
- 安全文件URL转换，防止路径遍历攻击
- 文件大小格式化，智能转换字节为易读格式
- 防抖函数，优化频繁操作响应性能
- 懒加载观察器，提升大量图像加载性能
- 异步安全执行，统一的错误捕获和处理

**3. 组件性能优化**
- EmojiCard组件：优化图像加载和用户交互
- EmojiGrid组件：改进网格布局和响应式设计
- EmojiListItem组件：提升列表渲染性能
- App主组件：优化整体应用架构

#### 🧹 系统清理

**1. 项目结构优化**
- 移除过时的版本说明文件
- 整理和优化项目目录结构
- 清理冗余代码和配置

**2. 代码质量提升**
- 统一代码风格和命名规范
- 提升代码可维护性和可读性
- 增强模块化设计

#### 🔧 技术亮点

**开发体验优化**
- 完整的TypeScript支持
- 智能错误处理机制
- 模块化工具函数设计

**用户体验提升**
- 触控设备友好界面
- 无障碍设计标准
- 响应式布局优化

**性能改进**
- 懒加载机制
- 防抖处理
- 优化的图像加载策略

---

### v2.1.0 - 界面和体验优化
- 全新的设置对话框设计
- 改进的响应式布局
- 优化滚动体验和布局
- 增强的用户交互反馈
- 修复已知的界面问题

### v2.0.0 - 重大版本更新
- 全新界面设计，现代化用户体验
- 改进的性能和稳定性
- 新增批量操作功能
- 优化的图像处理引擎
- 增强的搜索和筛选功能

### v1.3.0 - 功能增强
- 新增重复检测功能
- 改进的导入流程
- 增强的文件格式支持
- 优化内存使用

### v1.0.0
- 初始版本发布
- 基础的表情包管理功能
- 导入/导出功能
- 分类和搜索功能
- 设置界面